<!DOCTYPE html>
<html>
<head>
  <title>Generate Extension Icons</title>
</head>
<body>
  <h1>Icon Generator</h1>
  <p>This page generates the required PNG icons for the Chrome extension.</p>
  <button onclick="generateIcons()">Generate Icons</button>
  <div id="output"></div>

  <script>
    async function generateIcons() {
      const sizes = [16, 48, 128];
      const output = document.getElementById('output');
      output.innerHTML = '<h2>Generated Icons:</h2>';

      for (const size of sizes) {
        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');

        // Draw background
        ctx.fillStyle = '#611f69';
        ctx.roundRect(0, 0, size, size, size / 8);
        ctx.fill();

        // Draw simplified Slack logo
        const unit = size / 8;
        ctx.fillStyle = '#e01e5a';
        ctx.fillRect(unit * 3, unit * 1.5, unit * 2, unit * 2);

        ctx.fillStyle = '#36c5f0';
        ctx.fillRect(unit * 5, unit * 3.5, unit * 2, unit * 2);

        ctx.fillStyle = '#2eb67d';
        ctx.fillRect(unit * 3, unit * 5.5, unit * 2, unit * 2);

        ctx.fillStyle = '#ecb22e';
        ctx.fillRect(unit * 1, unit * 3.5, unit * 2, unit * 2);

        // Add text for larger icons
        if (size >= 48) {
          ctx.fillStyle = '#ffffff';
          ctx.font = `bold ${size / 8}px Arial`;
          ctx.textAlign = 'center';
          ctx.fillText('TOKEN', size / 2, size - size / 8);
        }

        // Convert to blob and download
        canvas.toBlob((blob) => {
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.href = url;
          link.download = `icon${size}.png`;
          link.textContent = `Download icon${size}.png`;
          link.style.display = 'block';
          link.style.margin = '10px 0';
          output.appendChild(link);

          // Also show the image
          const img = document.createElement('img');
          img.src = url;
          img.style.border = '1px solid #ccc';
          img.style.margin = '10px';
          output.appendChild(img);
        });
      }

      output.innerHTML += '<p><strong>Instructions:</strong> Click each "Download" link above to save the icons, then move them to the browser-extension directory.</p>';
    }

    // Polyfill for roundRect if not available
    if (!CanvasRenderingContext2D.prototype.roundRect) {
      CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r) {
        if (w < 2 * r) r = w / 2;
        if (h < 2 * r) r = h / 2;
        this.beginPath();
        this.moveTo(x + r, y);
        this.arcTo(x + w, y, x + w, y + h, r);
        this.arcTo(x + w, y + h, x, y + h, r);
        this.arcTo(x, y + h, x, y, r);
        this.arcTo(x, y, x + w, y, r);
        this.closePath();
        return this;
      };
    }
  </script>
</body>
</html>
